<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import java.net.URL?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.secureexam.desktop.AdminController" styleClass="root">
    <stylesheets>
        <URL value="@../css/styles.css" />
    </stylesheets>

    <!-- Top Header with improved spacing -->
    <top>
        <HBox styleClass="dashboard-header" alignment="CENTER_LEFT">
            <padding>
                <Insets top="20" right="30" bottom="20" left="30" />
            </padding>
            <Text text="Admin Dashboard" styleClass="app-title" />
            <Region HBox.hgrow="ALWAYS" />
            <Button fx:id="logoutButton" text="Logout" onAction="#handleLogout" styleClass="logout-button" />
        </HBox>
    </top>

    <!-- Main Content with card-based layout -->
    <center>
        <ScrollPane fitToWidth="true" styleClass="main-scroll-pane">
            <VBox spacing="25" styleClass="admin-container">
                <padding>
                    <Insets top="30" right="40" bottom="40" left="40" />
                </padding>

                <!-- Assign Examiner Section - Card based -->
                <VBox spacing="16" styleClass="card-section">
                    <padding>
                        <Insets top="24" right="24" bottom="24" left="24" />
                    </padding>
                    <Text text="Assign Examiner Role" styleClass="section-title" />
                    <HBox spacing="12" alignment="CENTER_LEFT">
                        <TextField fx:id="teacherEmail" promptText="Teacher Email or Phone" styleClass="text-field" HBox.hgrow="ALWAYS" />
                        <Button fx:id="assignExaminer" text="Assign Examiner Role" onAction="#handleAssignExaminer" styleClass="primary-button" />
                    </HBox>
                </VBox>

                <!-- Add Student Section - Card based with improved form layout -->
                <VBox spacing="16" styleClass="card-section">
                    <padding>
                        <Insets top="24" right="24" bottom="24" left="24" />
                    </padding>
                    <Text text="Add New Student" styleClass="section-title" />

                    <GridPane hgap="16" vgap="16" styleClass="form-grid">
                        <columnConstraints>
                            <ColumnConstraints minWidth="120" />
                            <ColumnConstraints hgrow="ALWAYS" />
                            <ColumnConstraints minWidth="120" />
                            <ColumnConstraints hgrow="ALWAYS" />
                        </columnConstraints>

                        <!-- Two-column responsive layout -->
                        <Label text="Email" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="field-label" />
                        <TextField fx:id="studentEmail" promptText="Student Email" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="text-field" />

                        <Label text="Registration Number" GridPane.rowIndex="0" GridPane.columnIndex="2" styleClass="field-label" />
                        <TextField fx:id="studentReg" promptText="Registration Number" GridPane.rowIndex="0" GridPane.columnIndex="3" styleClass="text-field" />

                        <Label text="Stream" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="field-label" />
                        <TextField fx:id="studentStream" promptText="Stream (e.g., Engineering)" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="text-field" />

                        <Label text="Branch" GridPane.rowIndex="1" GridPane.columnIndex="2" styleClass="field-label" />
                        <TextField fx:id="studentBranch" promptText="Branch (e.g., CSE)" GridPane.rowIndex="1" GridPane.columnIndex="3" styleClass="text-field" />

                        <Label text="Course" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="field-label" />
                        <TextField fx:id="studentCourse" promptText="Course (e.g., B.Tech)" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="text-field" />

                        <Label text="Class" GridPane.rowIndex="2" GridPane.columnIndex="2" styleClass="field-label" />
                        <TextField fx:id="studentClass" promptText="Class (e.g., Semester 4)" GridPane.rowIndex="2" GridPane.columnIndex="3" styleClass="text-field" />

                        <Label text="Section" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="field-label" />
                        <TextField fx:id="studentSection" promptText="Section (e.g., A)" GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="text-field" />
                    </GridPane>

                    <HBox alignment="CENTER_RIGHT">
                        <Button fx:id="addStudent" text="Add Student" onAction="#handleAddStudent" styleClass="primary-button" />
                    </HBox>
                    <HBox spacing="10">
                        <Button fx:id="generateStudentCSVButton" text="Generate Student CSV" onAction="#handleGenerateStudentCSV" styleClass="secondary-button" />
                        <Button fx:id="uploadStudentCSVButton" text="Upload Student CSV" onAction="#handleUploadStudentCSV" styleClass="primary-button" />
                    </HBox>
                    <TextField fx:id="csvStreamField" promptText="Stream for CSV" />
                    <TextField fx:id="csvBranchField" promptText="Branch for CSV" />
                    <TextField fx:id="csvClassField" promptText="Class for CSV" />
                    <TextField fx:id="csvSectionField" promptText="Section for CSV" />
                </VBox>

                <!-- Feedback Label -->
                <Label fx:id="feedbackLabel" text="" styleClass="feedback-label" wrapText="true" />
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>